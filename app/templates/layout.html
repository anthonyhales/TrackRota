<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ title if title else "On Call Tracker" }}</title>

  <!-- SB Admin (local) -->
  <link href="/static/sb-admin/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" />
  <link href="/static/sb-admin/css/sb-admin-2.min.css" rel="stylesheet" />
  <link href="/static/app.css" rel="stylesheet" />
</head>
<body id="page-top">
<div id="wrapper">

  <!-- Sidebar -->
  <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">
    <a class="sidebar-brand d-flex align-items-center justify-content-center" href="/">
      <div class="sidebar-brand-icon"><i class="fas fa-calendar-alt"></i></div>
      <div class="sidebar-brand-text mx-3">On Call</div>
    </a>

    <hr class="sidebar-divider my-0">

    <li class="nav-item">
      <a class="nav-link" href="/"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a>
    </li>

    <hr class="sidebar-divider">

    <div class="sidebar-heading">Rota</div>

    <li class="nav-item">
      <a class="nav-link" href="/rota"><i class="fas fa-table"></i><span>Rota</span></a>
    </li>

    {% if user and user.role in ["Admin", "Manager"] %}
    <li class="nav-item">
      <a class="nav-link" href="/staff"><i class="fas fa-users"></i><span>Staff</span></a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/shift-types"><i class="fas fa-sliders-h"></i><span>Shift Types</span></a>
    </li>
    {% endif %}

    <hr class="sidebar-divider">

    <div class="sidebar-heading">Admin</div>

    {% if user and user.role == "Admin" %}
    <li class="nav-item">
      <a class="nav-link" href="/users"><i class="fas fa-user-shield"></i><span>Users</span></a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/settings"><i class="fas fa-cog"></i><span>Settings</span></a>
    </li>
    {% endif %}

    <hr class="sidebar-divider d-none d-md-block">
  </ul>
  <!-- End Sidebar -->

  <!-- Content Wrapper -->
  <div id="content-wrapper" class="d-flex flex-column">
    <div id="content">

      <!-- Topbar -->
      <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
        <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
          <i class="fa fa-bars"></i>
        </button>

        <ul class="navbar-nav ml-auto">
          {% if user %}
          <li class="nav-item dropdown no-arrow">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown">
              <span class="mr-2 d-none d-lg-inline text-gray-600 small">{{ user.email }}</span>
              <i class="fas fa-user-circle fa-lg text-gray-400"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
              <div class="dropdown-item-text">
                <div><strong>{{ user.role }}</strong></div>
              </div>
              <div class="dropdown-divider"></div>
              <form method="post" action="/logout" class="px-3">
                <button class="btn btn-sm btn-danger btn-block" type="submit">Logout</button>
              </form>
            </div>
          </li>
          {% endif %}
        </ul>
      </nav>
      <!-- End Topbar -->

      <div class="container-fluid">
        {% block content %}{% endblock %}
      </div>
    </div>

    <footer class="sticky-footer bg-white">
      <div class="container my-auto">
        <div class="copyright text-center my-auto">
          <span>On Call Tracker â€” ALPHA 1</span>
        </div>
      </div>
    </footer>
  </div>
</div>

<script src="/static/sb-admin/vendor/jquery/jquery.min.js"></script>
<script src="/static/sb-admin/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/static/sb-admin/vendor/jquery-easing/jquery.easing.min.js"></script>
<script src="/static/sb-admin/js/sb-admin-2.min.js"></script>
<script src="/static/app.js"></script>
</body>
</html>
